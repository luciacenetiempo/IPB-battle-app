(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[23],{1218:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>p});var i=a(7876),r=a(4232),l=a(6932),s=a(5940),n=a(1446),o=a.n(n),d=a(6141);function p(){let[t,e]=(0,r.useState)(!1),[a,n]=(0,r.useState)(""),[p,c]=(0,r.useState)(""),[h,f]=(0,r.useState)(null),u=(0,r.useRef)(null),[g,_]=(0,r.useState)(""),[x,m]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=(0,s.KR)(l.db,"gameState"),a=(0,s.Zy)(e,e=>{let a=e.val();a&&(f(a),!t&&g&&a.validTokens&&a.validTokens.includes(g.toUpperCase()))});return()=>a()},[t,g]),(0,r.useEffect)(()=>{if(!g)return;let a=g.toUpperCase(),i=(0,s.KR)(l.db,"participants/".concat(a)),r=(0,s.Zy)(i,a=>{let i=a.val();i?(e(!0),m(""),i.prompt&&!p&&c(i.prompt)):t&&(null==h||h.round)});return()=>r()},[g]);let[v,j]=(0,r.useState)({});(0,r.useEffect)(()=>{let t=(0,s.KR)(l.db,"participants"),e=(0,s.Zy)(t,t=>{j(t.val()||{})});return()=>e()},[]);let[C,b]=(0,r.useState)(0);(0,r.useEffect)(()=>{if(!h)return;let t=setInterval(()=>{if("WRITING"===h.status&&h.startTime){let t=Math.floor((Date.now()-h.startTime)/1e3);b(Math.max(0,h.duration-t))}else"VOTING"===h.status&&h.votingTimerStartTime?b(Math.max(0,120-Math.floor((Date.now()-h.votingTimerStartTime)/1e3))):"VOTING"===h.status?b(h.votingTimer||0):b(h.timer||0)},1e3);return()=>clearInterval(t)},[h]);let N=async t=>{var i;if(t.preventDefault(),!g.trim()||!a.trim())return;let r=g.trim().toUpperCase();if(!(null==h||null==(i=h.validTokens)?void 0:i.includes(r)))return void m("INVALID TOKEN");let n=(0,s.KR)(l.db,"participants");try{await (0,s.c4)(n,t=>{if((t=t||{})[r])return t[r]={...t[r],name:a.trim(),color:t[r].color||"#BEFA4F"},t;let e=["#BEFA4F","#E83399","#5AA7B9","#F5B700"],i=Object.values(t).map(t=>t.color),l=e.filter(t=>!i.includes(t)),s=l.length>0?l[Math.floor(Math.random()*l.length)]:e[Math.floor(Math.random()*e.length)];return t[r]={id:r,token:r,name:a.trim(),color:s,prompt:"",votes:0},t}),e(!0),setTimeout(async()=>{try{let t=(0,s.KR)(l.db,"gameState"),e=(0,s.KR)(l.db,"participants"),a=(await (0,s.Jt)(e)).val()||{},i=Object.keys(a).length;await (0,s.c4)(t,t=>t&&"WAITING_FOR_PLAYERS"===t.status&&i===t.expectedParticipantCount?(console.log("[Participant] All ".concat(i," participants joined, auto-starting WRITING phase")),{...t,status:"WRITING",startTime:Date.now()}):t)}catch(t){console.error("[Participant] Error in auto-start logic:",t)}},500)}catch(t){m("JOIN FAILED: "+t.message)}},P=(0,r.useRef)(null);if(!t)return(0,i.jsxs)("div",{className:o().loginContainer,children:[(0,i.jsx)("div",{className:o().loginLogoWrapper,children:(0,i.jsx)(d.A,{size:"medium"})}),(0,i.jsxs)("form",{onSubmit:N,className:o().loginForm,children:[(0,i.jsx)("div",{className:o().loginTitle,children:(0,i.jsx)("h1",{className:"glitch","data-text":"IDENTIFY",children:"IDENTIFY"})}),x&&(0,i.jsx)("div",{className:o().errorMessage,children:x}),(0,i.jsxs)("div",{className:o().inputGroup,children:[(0,i.jsxs)("label",{className:o().inputLabel,children:["ACCESS TOKEN ",(0,i.jsx)("span",{className:o().inputLabelRequired,children:"*"})]}),(0,i.jsx)("input",{className:o().loginInput,type:"text",placeholder:"ACCESS TOKEN",value:g,onChange:t=>_(t.target.value.toUpperCase()),autoFocus:!0,maxLength:4,required:!0})]}),(0,i.jsxs)("div",{className:o().inputGroup,children:[(0,i.jsxs)("label",{className:o().inputLabel,children:["NOME ",(0,i.jsx)("span",{className:o().inputLabelRequired,children:"*"})]}),(0,i.jsx)("input",{className:o().loginInput,type:"text",placeholder:"NOME",value:a,onChange:t=>n(t.target.value),required:!0})]}),(0,i.jsx)("button",{className:o().loginButton,type:"submit",disabled:!g.trim()||!a.trim(),children:"ENTER SYSTEM"})]})]});if(!h)return(0,i.jsx)("div",{className:o().container,children:"Loading System..."});let T=v[g?g.toUpperCase():null],M="WRITING"===h.status,w="VOTING"===h.status||"ENDED"===h.status,I=(null==T?void 0:T.color)||"#B6FF6C";return(0,i.jsxs)("div",{className:o().writingContainer,style:{backgroundColor:I},children:[(0,i.jsxs)("div",{className:o().writingHeader,children:[(0,i.jsx)("div",{className:o().writingTimer,children:C}),h.theme&&(0,i.jsx)("div",{className:o().writingTheme,children:h.theme}),(0,i.jsx)("div",{className:o().writingStatus,children:h.status})]}),(0,i.jsx)("div",{className:o().editorContainer,children:(0,i.jsx)("textarea",{ref:u,className:o().textarea,value:p,onChange:t=>{let e=t.target.value;c(e),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{g&&(0,s.yo)((0,s.KR)(l.db,"participants/".concat(g.toUpperCase())),{prompt:e})},300)},disabled:!M,placeholder:M?"TYPE PROMPT...":w?"VOTING IN PROGRESS...":"WAITING FOR SIGNAL...",spellCheck:"false",readOnly:w})}),(0,i.jsx)("div",{className:o().writingFooter,children:a})]})}},1446:t=>{t.exports={loginContainer:"Participant_loginContainer__iLt1N",gridMove:"Participant_gridMove__Ur75i",loginForm:"Participant_loginForm__shoKS",loginInput:"Participant_loginInput__Vzasw",inputGroup:"Participant_inputGroup__7Htmc",inputLabel:"Participant_inputLabel__9y_yR",inputLabelRequired:"Participant_inputLabelRequired__o5gpq",loginButton:"Participant_loginButton__ulcCZ",errorMessage:"Participant_errorMessage__iWdJt",slideDown:"Participant_slideDown__8EAgb",loginLogoWrapper:"Participant_loginLogoWrapper__Ogz8D",loginTitle:"Participant_loginTitle__i6MGz",writingContainer:"Participant_writingContainer___SxSt",writingHeader:"Participant_writingHeader__J_Wiv",writingTimer:"Participant_writingTimer__Nuuxe",writingTheme:"Participant_writingTheme__l730O",writingStatus:"Participant_writingStatus__TQzjn",editorContainer:"Participant_editorContainer__gjOz2",textarea:"Participant_textarea__eYRkt",writingFooter:"Participant_writingFooter__Iv0GH",container:"Participant_container__p6D0l",header:"Participant_header__0bDIb",timer:"Participant_timer__bDblb",status:"Participant_status__TgPbS",footer:"Participant_footer__ms_Mv",votingContainer:"Participant_votingContainer__zKRmk",votingHeader:"Participant_votingHeader__pJKnc",votingTimer:"Participant_votingTimer__YVVSV",votingTitle:"Participant_votingTitle__NiULu",votingGrid:"Participant_votingGrid__Wnv8J",votingCard:"Participant_votingCard__xDfl_",votingCardDisabled:"Participant_votingCardDisabled__XHtTg",votingCardSelected:"Participant_votingCardSelected__HJ_y9",votingImage:"Participant_votingImage__Zu_Cu",votingImagePlaceholder:"Participant_votingImagePlaceholder__NdEJA",votingImagePlaceholderText:"Participant_votingImagePlaceholderText__4anii",votingCardName:"Participant_votingCardName__p1Pey",votingCardCheckmark:"Participant_votingCardCheckmark__KfAhh",pulse:"Participant_pulse__delKT",votingButton:"Participant_votingButton__Xg02Q",votingConfirmed:"Participant_votingConfirmed__PuL18"}},6141:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(7876);function r(t){let{size:e="medium"}=t,a={small:80,medium:120,large:160},r=a[e]||a.medium;return(0,i.jsx)("div",{style:{position:"fixed",top:"2rem",left:"2rem",zIndex:1e3,opacity:.9,width:"".concat(r,"px"),height:"auto"},children:(0,i.jsxs)("svg",{viewBox:"0 0 764.59 265.73",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{width:"100%",height:"auto"},children:[(0,i.jsxs)("defs",{children:[(0,i.jsxs)("linearGradient",{id:"grad1",x1:"5333.78",y1:"-4488.5",x2:"5554.06",y2:"-4488.5",gradientTransform:"translate(-6824.03 1659.66) rotate(-52.13) scale(1 -1)",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{offset:"0",stopColor:"#dcb06c"}),(0,i.jsx)("stop",{offset:".1",stopColor:"#c5a28a"}),(0,i.jsx)("stop",{offset:".3",stopColor:"#8b81b8"}),(0,i.jsx)("stop",{offset:".34",stopColor:"#7d7ab5"}),(0,i.jsx)("stop",{offset:".64",stopColor:"#cca683"}),(0,i.jsx)("stop",{offset:".7",stopColor:"#cd9777"}),(0,i.jsx)("stop",{offset:".81",stopColor:"#d87861"}),(0,i.jsx)("stop",{offset:".84",stopColor:"#db6d58"}),(0,i.jsx)("stop",{offset:".99",stopColor:"#dc9381"})]}),(0,i.jsxs)("linearGradient",{id:"grad2",x1:"1506.24",y1:"-8980.83",x2:"1638.6",y2:"-8980.83",gradientTransform:"translate(-4019.9 8270.7) rotate(-143.48) scale(1 -1)",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{offset:"0",stopColor:"#dcb06c"}),(0,i.jsx)("stop",{offset:".05",stopColor:"#dcb06c"}),(0,i.jsx)("stop",{offset:".16",stopColor:"#7d7ab5"}),(0,i.jsx)("stop",{offset:".29",stopColor:"#db6d58"}),(0,i.jsx)("stop",{offset:".39",stopColor:"#db6d58"}),(0,i.jsx)("stop",{offset:".53",stopColor:"#dcb06c"}),(0,i.jsx)("stop",{offset:".71",stopColor:"#db6d58"}),(0,i.jsx)("stop",{offset:".84",stopColor:"#dc9381"}),(0,i.jsx)("stop",{offset:".9",stopColor:"#6862a6"}),(0,i.jsx)("stop",{offset:".99",stopColor:"#dc9381"})]}),(0,i.jsx)("linearGradient",{id:"grad3",x1:"4721.15",y1:"-1530.41",x2:"4589.57",y2:"-1616.59",gradientTransform:"translate(-4732.49 225.19) rotate(-20.25) scale(1 -1)",xlinkHref:"#grad1"}),(0,i.jsx)("linearGradient",{id:"grad4",x1:"1371.71",y1:"-9073.42",x2:"1614.91",y2:"-9073.42",xlinkHref:"#grad2"}),(0,i.jsx)("linearGradient",{id:"grad5",x1:"4275.35",y1:"-1621.4",x2:"4146.87",y2:"-1619.18",gradientTransform:"translate(-4348.79 466.48) rotate(-24.47) scale(1 -1)",xlinkHref:"#grad1"}),(0,i.jsx)("linearGradient",{id:"grad6",x1:"1372.14",y1:"-8964.57",x2:"1533.85",y2:"-8964.57",xlinkHref:"#grad2"})]}),(0,i.jsxs)("g",{children:[(0,i.jsx)("path",{fill:"url(#grad1)",stroke:"url(#grad2)",strokeMiterlimit:"10",strokeWidth:"1.09",d:"M8.87,79.02L93.8,3.54l28.46,141.94L26.69,230.41,1.03,102.42c-1.73-8.64,1.25-17.55,7.84-23.41Z"}),(0,i.jsx)("path",{fill:"url(#grad3)",stroke:"url(#grad4)",strokeMiterlimit:"10",strokeWidth:"1.09",d:"M93.8,3.54l130.78,24.85c9.26,1.77,16.53,8.96,18.38,18.2l25.39,126.65-146.11-27.77L93.8,3.54Z"}),(0,i.jsx)("path",{fill:"url(#grad5)",stroke:"url(#grad6)",strokeMiterlimit:"10",strokeWidth:"1.09",d:"M122.27,145.48l146.1,27.77-85.69,76.15c-6.23,5.54-14.67,7.86-22.85,6.32l-133.13-25.29,95.57-84.93v-.02Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M341.04,0h18.01l-14.48,74.42h-18.06L341.04,0Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M425.31,0l-3.27,17.23h-20.97l-11.16,57.19h-17.96l11.16-57.19h-21.02l3.27-17.23h59.94Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M462.66,74.42l-1.92-10.85h-26.67l-6.23,10.85h-19.46L452.28,0h14.32l15.21,74.42h-19.15ZM442.89,48.26h15.1l-3.48-19.98-11.62,19.98Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M501.21,0h18.01l-11.16,57.19h33.01l-3.37,17.23h-51.01L501.21,0Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M559.01,0h18.01l-14.48,74.42h-18.06L559.01,0Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M621.38,74.42l-1.92-10.85h-26.67l-6.23,10.85h-19.46L611,0h14.32l15.21,74.42h-19.15ZM601.61,48.26h15.1l-3.48-19.98-11.62,19.98Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M659.93,0h14.79l19.46,38.82,7.84-38.82h18.01l-14.48,74.42h-14.69l-19.62-38.66-7.79,38.66h-18.06L659.93,0Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M368.39,92.11c6.37,0,11.73,2.1,16.09,6.31s6.54,9.37,6.54,15.49c0,5.29-1.38,10.06-4.15,14.3-2.77,4.24-6.49,7.51-11.16,9.81-4.67,2.3-9.81,3.45-15.41,3.45h-10.85l-4.88,25.07h-18.06l14.53-74.42h27.35ZM362.42,124.24c2.77,0,5.23-.82,7.4-2.46,2.16-1.64,3.24-3.62,3.24-5.94,0-1.83-.66-3.37-1.97-4.62-1.32-1.25-2.92-1.87-4.83-1.87h-10.53l-2.96,14.89h9.65Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M450.48,116.66c-.9,4.5-2.59,8.43-5.06,11.78-2.47,3.36-5.56,5.95-9.26,7.78l12.97,30.31h-19.67l-10.54-27.4h-7.89l-5.29,27.4h-18.06l14.53-74.42h28.59c3.08,0,5.98.66,8.72,1.97,2.73,1.32,5.01,3.06,6.83,5.24,1.82,2.18,3.12,4.79,3.92,7.84.79,3.04.86,6.21.21,9.5ZM416.8,109.45l-2.75,14.27h8.93c2.21,0,4.26-.67,6.12-2.02,1.87-1.35,3.01-3.1,3.42-5.24.42-2.08.05-3.76-1.09-5.06-1.14-1.3-2.84-1.95-5.08-1.95h-9.55Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M500.19,91.07c6.64,0,12.51,1.39,17.62,4.18,5.1,2.79,9.04,6.65,11.81,11.6,2.77,4.95,4.15,10.57,4.15,16.87,0,7.85-1.94,15.15-5.81,21.87-3.88,6.73-9.15,12.07-15.83,16.04-6.68,3.96-13.93,5.94-21.74,5.94-6.61,0-12.46-1.38-17.57-4.15-5.1-2.77-9.05-6.62-11.83-11.55s-4.18-10.53-4.18-16.79c0-5.92,1.15-11.58,3.45-17,2.3-5.41,5.39-10.09,9.26-14.04,3.87-3.94,8.49-7.09,13.86-9.44,5.36-2.35,10.97-3.53,16.81-3.53ZM498.06,108.61c-3.88,0-7.56,1.1-11.05,3.3-3.5,2.2-6.31,5.21-8.46,9.03-2.15,3.82-3.22,7.97-3.22,12.43,0,4.95,1.58,8.97,4.75,12.07,3.17,3.1,7.34,4.64,12.53,4.64,2.91,0,5.74-.66,8.51-1.97,2.77-1.31,5.2-3.07,7.29-5.27,2.09-2.2,3.78-4.83,5.06-7.89,1.28-3.06,1.92-6.25,1.92-9.57,0-4.95-1.59-8.98-4.77-12.09-3.18-3.11-7.37-4.67-12.56-4.67Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M533.75,166.53l14.53-74.42h21.38l10.64,48.06,30.83-48.06h19.2l-14.43,74.42h-17.96l7.84-39.54-24.24,39.54h-13.29l-8.56-39.54-7.89,39.54h-18.06Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M666.91,92.11c6.37,0,11.73,2.1,16.09,6.31s6.54,9.37,6.54,15.49c0,5.29-1.38,10.06-4.15,14.3-2.77,4.24-6.49,7.51-11.16,9.81-4.67,2.3-9.81,3.45-15.41,3.45h-10.85l-4.88,25.07h-18.06l14.53-74.42h27.35ZM660.94,124.24c2.77,0,5.23-.82,7.4-2.46,2.16-1.64,3.24-3.62,3.24-5.94,0-1.83-.66-3.37-1.97-4.62-1.32-1.25-2.92-1.87-4.83-1.87h-10.53l-2.96,14.89h9.65Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M757.51,92.11l-3.27,17.23h-20.97l-11.16,57.19h-17.96l11.16-57.19h-21.02l3.27-17.23h59.94Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M326.51,258.64l14.53-74.42h27.97c4.32,0,8.17.97,11.55,2.91,3.37,1.94,5.84,4.53,7.4,7.79,1.56,3.25,1.97,6.75,1.25,10.48-.62,3.08-2.04,5.93-4.26,8.56-2.21,2.63-4.93,4.52-8.15,5.66,3.46.9,6.1,3.08,7.91,6.54,1.82,3.46,2.26,7.49,1.32,12.09-.69,3.81-2.38,7.27-5.06,10.41-2.68,3.13-5.98,5.58-9.89,7.34-3.91,1.76-8.01,2.65-12.3,2.65h-32.28ZM347.89,241.41h11.57c2.21,0,4.19-.68,5.92-2.05,1.73-1.37,2.84-3.09,3.32-5.16.76-4.67-1.57-7.01-7.01-7.01h-11.05l-2.75,14.22ZM353.29,213.49h9.13c2.01,0,3.81-.59,5.4-1.76,1.59-1.18,2.59-2.65,3.01-4.41.31-1.94-.04-3.4-1.04-4.38-1-.99-2.68-1.48-5.03-1.48h-9.03l-2.44,12.04Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M437.45,258.64l-1.92-10.85h-26.67l-6.23,10.85h-19.46l43.9-74.42h14.32l15.21,74.42h-19.15ZM417.68,232.49h15.1l-3.48-19.98-11.62,19.98Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M523.74,184.22l-3.27,17.23h-20.97l-11.16,57.19h-17.96l11.16-57.19h-21.02l3.27-17.23h59.94Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M587.26,184.22l-3.27,17.23h-20.97l-11.16,57.19h-17.96l11.16-57.19h-21.02l3.27-17.23h59.94Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M593.68,184.22h18.01l-11.16,57.19h33.01l-3.37,17.23h-51.01l14.53-74.42Z"}),(0,i.jsx)("path",{fill:"#fff",d:"M651.48,184.22h46.71l-3.32,17.23h-28.7l-2.13,10.64h25.64l-3.32,17.23h-25.58l-2.44,12.09h28.65l-3.27,17.23h-46.76l14.53-74.42Z"})]})]})})}},6932:(t,e,a)=>{"use strict";a.d(e,{db:()=>s});var i=a(6042),r=a(5940);let l=0===(0,i.Dk)().length?(0,i.Wp)({apiKey:"AIzaSyBxaJXxnRMJ2mhIrdwkhw-JRw0U1KI-z2o",authDomain:"ipbapp-5e085.firebaseapp.com",databaseURL:"https://ipbapp-5e085-default-rtdb.europe-west1.firebasedatabase.app",projectId:"ipbapp-5e085",storageBucket:"ipbapp-5e085.firebasestorage.app",messagingSenderId:"755522709316",appId:"1:755522709316:web:e35e3d9b96debc93955911"}):(0,i.Dk)()[0],s=(0,r.C3)(l)},8929:(t,e,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/participant",function(){return a(1218)}])}},t=>{t.O(0,[280,76,636,593,792],()=>t(t.s=8929)),_N_E=t.O()}]);